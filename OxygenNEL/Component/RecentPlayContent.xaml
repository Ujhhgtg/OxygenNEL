<?xml version="1.0" encoding="utf-8"?>

<UserControl
    x:Class="OxygenNEL.Component.RecentPlayContent"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:type="using:OxygenNEL.type"
    xmlns:local="using:OxygenNEL">

    <UserControl.Resources>
        <local:StringToImageSourceConverter x:Key="StringToImageSourceConverter" />
    </UserControl.Resources>

    <Grid x:Name="RootPanel" Visibility="Collapsed">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <TextBlock Grid.Row="0" Text="最近游玩" Style="{StaticResource SubtitleTextBlockStyle}" Margin="0,0,0,12" />
        <ItemsRepeater Grid.Row="1" x:Name="RecentPlayRepeater">
            <ItemsRepeater.Layout>
                <StackLayout Orientation="Horizontal" Spacing="12" />
            </ItemsRepeater.Layout>
            <ItemsRepeater.ItemTemplate>
                <DataTemplate x:DataType="type:RecentPlayItem">
                    <Grid Background="{ThemeResource LayerFillColorDefaultBrush}" CornerRadius="8" Width="260"
                          Height="200">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="100" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>
                        <Border Grid.Row="0" CornerRadius="8,8,0,0" Background="{ThemeResource LayerFillColorAltBrush}">
                            <Image Source="{x:Bind ImagePath, Converter={StaticResource StringToImageSourceConverter}}"
                                   Stretch="UniformToFill" HorizontalAlignment="Center" VerticalAlignment="Center" />
                        </Border>
                        <Grid Grid.Row="1" Padding="12,8">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>
                            <TextBlock Grid.Row="0" Text="{x:Bind ServerName}"
                                       Style="{StaticResource BodyStrongTextBlockStyle}"
                                       TextWrapping="NoWrap" TextTrimming="CharacterEllipsis" />
                            <TextBlock Grid.Row="1" Text="{x:Bind ServerType}"
                                       Style="{StaticResource CaptionTextBlockStyle}"
                                       Foreground="{ThemeResource TextFillColorSecondaryBrush}" Margin="0,2,0,0" />
                            <Button Grid.Row="2" Content="加入" Click="JoinButton_Click" Tag="{x:Bind}"
                                    HorizontalAlignment="Left" VerticalAlignment="Bottom" Padding="16,4" />
                        </Grid>
                    </Grid>
                </DataTemplate>
            </ItemsRepeater.ItemTemplate>
        </ItemsRepeater>
    </Grid>
</UserControl>